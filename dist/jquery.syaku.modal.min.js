!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(b){var e=this;this.version="1.0.2",this.object=b,this.options=b.options,this.target=b.target,this.modal=null,this.init=function(){this.modal=a('<div class="syaku-modal" style="display:none;"></div>'),null!=b.options.single&&(a("body .syaku-modal."+b.options.single).each(function(){a(this).remove()}),this.modal.addClass(b.options.single)),a("body").append(this.modal),d.center(b)},this.open=function(){null==this.modal&&this.init(),a(".syaku-backer",this.modal).length>0||("function"==typeof b.options.beforeOpen&&b.options.beforeOpen(b),c++,1==b.options.buttonClose&&b.target.append(a('<a href="#" class="button-close"></a>').click(function(a){a.preventDefault(),e.close()}).css({zIndex:b.options.zIndex+1+c})),b.modal.push(e),this.modal.append(d.background(e)).append(d.content(b)),this.modal.show(),d.center(b),null!=b.options.focus&&a(b.options.focus,e.modal).focus(),"function"==typeof b.options.afterOpen&&b.options.afterOpen(b))},this.close=function(){d.close()},1==b.options.auto&&this.open()}var c=0,d={target:null,options:{auto:!1,padding:"15px",radius:"8px",remove:!1,single:null,esc:!0,focus:null,backgroundColor:"#000",buttonClose:!1,opacity:.75,zIndex:1030,beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null,css:null,width:null,height:null},modal:[],config:function(b){var c=a.extend(!0,{},d.options,b);return c=a.extend({},d,{options:c})},background:function(b){var d=b.options,e=a('<div class="background"></div>').addClass("syaku-backer").css({zIndex:d.zIndex+c,background:d.backgroundColor,opacity:d.opacity});return e},content:function(a){var b=a.options,d=a.target;a.background;null!=a.options.padding&&d.css({padding:a.options.padding}),null!=a.options.radius&&d.css({"-webkit-border-radius":a.options.radius,"-moz-border-radius":a.options.radius,"-o-border-radius":a.options.radius,"-ms-border-radius":a.options.radius,"border-radius":a.options.radius}),null!=b.css&&d.addClass(b.css),d.addClass("content");var e={position:"fixed",zIndex:b.zIndex+1+c};return null!=b.width&&(e.width=b.width),null!=b.height&&(e.height=b.height),d.addClass("syaku-content").css(e),a.target.show(),d},center:function(a){var b=a.target;b.css({top:"50%",left:"50%",marginTop:-(b.outerHeight()/2),marginLeft:-(b.outerWidth()/2)})},close:function(b){if(0!=this.modal.length){var c=this.modal[this.modal.length-1];1==b&&0==c.object.options.esc||("function"==typeof c.object.options.beforeClose&&c.object.options.beforeClose(c.object),0==c.object.options.remove?(c.modal.hide(),a(".syaku-backer",c.modal).remove(),a(".button-close",c.modal).remove()):c.modal.remove(),this.modal.pop(),"function"==typeof c.object.options.afterClose&&c.object.options.afterClose(c.object))}},remove:function(){if(0!=this.modal.length){var a=this.modal[this.modal.length-1];a.modal.remove(),this.modal.pop()}}};a.jmodal={config:function(b){a.extend(!0,d.options,b)},options:d.options},a.fn.jmodal=function(a){var c=d.config(a);c.target=this,c.target.hide();var e=new b(c);return e},a(document).on("keydown.syaku-modal",function(a){27==a.keyCode&&d.close(!0)})});